import sqlite3

conexion = sqlite3.connect("Hospital.db")
cursor = conexion.cursor()

#Tabla Paciente 
cursor.execute("""
CREATE TABLE IF NOT EXISTS Paciente (
    id_paciente INTEGER PRIMARY KEY AUTOINCREMENT,
    nombre TEXT NOT NULL,
    apellido TEXT NOT NULL,
    fecha_nacimiento TEXT,
    telefono TEXT,
    email TEXT,
    historia_clinica TEXT
);
""")

#Tabla Doctor
cursor.execute("""
CREATE TABLE IF NOT EXISTS Doctor (
    id_doctor INTEGER PRIMARY KEY AUTOINCREMENT,
    nombre TEXT NOT NULL,
    apellido TEXT NOT NULL,
    especialidad TEXT,
    telefono TEXT,
    email TEXT
);
""")

#Tabla Cita
cursor.execute("""
CREATE TABLE IF NOT EXISTS Cita (
    id_cita INTEGER PRIMARY KEY AUTOINCREMENT,
    fecha TEXT NOT NULL,
    hora TEXT NOT NULL,
    motivo TEXT,
    id_paciente INTEGER NOT NULL,
    id_doctor INTEGER NOT NULL,
    FOREIGN KEY (id_paciente) REFERENCES Paciente(id_paciente),
    FOREIGN KEY (id_doctor) REFERENCES Doctor(id_doctor)
);
""")

#Tabla Direccionn
cursor.execute("""
CREATE TABLE IF NOT EXISTS Direccion (
    id_direccion INTEGER PRIMARY KEY AUTOINCREMENT,
    calle TEXT,
    numero TEXT,
    ciudad TEXT,
    region TEXT,
    codigo_postal TEXT,
    id_paciente INTEGER,
    id_doctor INTEGER,
    FOREIGN KEY (id_paciente) REFERENCES Paciente(id_paciente),
    FOREIGN KEY (id_doctor) REFERENCES Doctor(id_doctor)
);
""")

#Tabla Receta
cursor.execute("""
CREATE TABLE IF NOT EXISTS Receta (
    id_receta INTEGER PRIMARY KEY AUTOINCREMENT,
    fecha TEXT,
    medicamentos TEXT,
    indicaciones TEXT,
    id_paciente INTEGER NOT NULL,
    id_doctor INTEGER NOT NULL,
    id_cita INTEGER,
    FOREIGN KEY (id_paciente) REFERENCES Paciente(id_paciente),
    FOREIGN KEY (id_doctor) REFERENCES Doctor(id_doctor),
    FOREIGN KEY (id_cita) REFERENCES Cita(id_cita)
);
""")

conexion.commit()
conexion.close()

print("Base de datos y tablas creadas correctamente.")
 
